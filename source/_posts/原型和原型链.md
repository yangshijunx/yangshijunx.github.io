---
title: 原型和原型链
date: 2023-09-21 20:11:43
categories: 
- web前端
tags:
- Javascript
---
# 原型和原型链

**javascript中的对象有一个特殊的Prototype内置属性，其实就是相对于其他对象的引用，几乎所有的对象在创建的时候Prototype属性都有一个非空的值。这个对象就叫做原型对象。**

在js中当我们使用对象的某个属性值的时候会触发`[[get]]` 操作，在进行get操作的时候，第一步检查对象本身是不是有这个属性，如果有就使用，如果没有的话就会检查对象的`[[Prototype]]` 链。这个过程会检查完整个原型链，如果找不到返回值就是undefined，这个链就叫做原型链。

```jsx
function People(name, age) {
  (this.name = name), (this.age = age);
}
People.prototype.sayHi = function () {
  console.log("hello:", this.name);
};
const bob = new People("bob", 12);
bob.sayHi()
VM165:5 hello: bob
```

在上面的例子中，我们声明了一个构造函数People,并调用该构造函数创建了一个实例bob，在实例bob上面调用sayHi方法，bob上面本身是没有该方法的，那么他就会顺着原型链一层一层查找，直到找到People构造函数的原型对象，并调用。对象通过原型链实现属性和方法的承，每个对象通过内部链接指向其原型对象，形成一个链条。

### 构造函数

我们在上面的例子中创建bob实例的时候使用了new关键字，在面向对象的语言中构造类实例的时候会用到他，所以我们理所当然的认为People是一个“类”。在js中“类”名的首字母一般来说要大写，其实小写也不会有任何问题。我们在使用new关键字创建的对象会有一个`constructor` 属性，这个属性指向的就是这个**构造函数**。

那么什么叫构造函数呢，本质上来说构造函数和普通函数没有区别，函数本身并不是构造函数，但是如果你使用new关键字调用这个函数，就会把这个函数调用变成一个“构造函数调用”，实际上，new会劫持所有普通函数并用构造对象的形式来调用他。**换句话说对于js中的构造函数就是：所有带new的函数调用。**

那么new关键字到底做了什么事情呢？

使用 new 来调用函数，或者说发生构造函数调用时，会自动执行下面的操作。

1. 创建（或者说构造）一个全新的对象。
2. 这个新对象会被执行 [[ 原型 ]] 连接。
3. 这个新对象会绑定到函数调用的 this。
4. 如果函数没有返回其他对象，那么 new 表达式中的函数调用会自动返回这个新对象。

PS:constructor属性实际上是不被信任的，它们不一定会指向默认的函数引用，可以被修改。